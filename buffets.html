<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/responsive.css">
  <link rel="stylesheet" href="css/bootstrap-grid.min.css">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">
  <title>Буффет</title>
</head>

<body>
  <div class="wrapper">
    <div class="container p-5">
      <h1 class="mb-5">Активные товары буффета</h1>
      <div class="w-100 d-flex mb-3 justify-content-end">
        <button type="button" class="btn btn-outline-primary fs-5" data-bs-toggle="modal"
          data-bs-target="#deleted-product">
          посмотреть удаленные товары
        </button>
      </div>

      <div class="row" id="products-root">

      </div>

      <!-- Button trigger modal -->
      <div class="w-100 d-flex justify-content-center">
        <button type="button" class="btn btn-primary fs-5" data-bs-toggle="modal" data-bs-target="#buffet-modal">
          Добавить продукт
        </button>
      </div>

      <!-- Modal -->
      <div class="modal fade" id="buffet-modal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="staticBackdropLabel">Добавить</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <form action="javascript:void(0)" id="add__product-form" name="addProductForm">
                <div class="row">
                  <div class="mb-3 col-6">
                    <label for="productName" class="form-label">Название</label>
                    <input type="text" class="form-control" id="productName" placeholder="Введите название" name="name">
                  </div>
                  <div class="mb-3 col-6">
                    <label for="price" class="form-label">Стоимость</label>
                    <input type="number" class="form-control" id="price" placeholder="Введите цену" name="price">
                  </div>

                  <div class="mb-3 col-6">
                    <label for="editPrice" class="form-label">Количество</label>
                    <input type="number" class="form-control" id="amount" placeholder="Введите количество"
                      name="amount">
                  </div>

                  <div class="mb-3">
                    <label for="productPhoto" class="form-label">Ссылка на фото</label>
                    <input type="text" class="form-control" id="productPhoto" placeholder="Введите ссылку на фото"
                      name="image">
                  </div>
                </div>
              </form>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">закрыть</button>
              <button type="button" id="add__productBtn" class="btn btn-primary">добавить</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Modal deleted product -->
      <div class="modal fade" id="deleted-product" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="staticBackdropLabel">Список удаленных товаров</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <div class="row" id="deleled-product-root">

              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">закрыть</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Modal Edit -->
      <div class="modal fade" id="buffet-edit-modal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="staticBackdropLabel">Редактировать</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <form action="javascript:void(0)" id="edit__product-form">
                <div class="row">
                  <div class="mb-3 col-6">
                    <label for="editProductName" class="form-label">Название</label>
                    <input type="text" class="form-control" id="editProductName" placeholder="Введите название"
                      name="name">
                  </div>
                  <div class="mb-3 col-6">
                    <label for="editPrice" class="form-label">Стоимость</label>
                    <input type="number" class="form-control" id="editPrice" placeholder="Введите цену" name="price">
                  </div>
                  <div class="mb-3 col-6">
                    <label for="editPrice" class="form-label">Количество</label>
                    <input type="number" class="form-control" id="editPrice" placeholder="Введите количество"
                      name="amount">
                  </div>

                  <div class="mb-3">
                    <label for="editProductPhoto" class="form-label">ссылка на фото</label>
                    <input type="text" class="form-control" id="editProductPhoto" placeholder="Введите ссылку на фото"
                      name="image">
                  </div>
                </div>
              </form>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">закрыть</button>
              <button type="button" id="edit__productBtn" class="btn btn-primary">изменить</button>
            </div>
          </div>
        </div>
      </div>


    </div>


  </div>

  <script id="buffet-product-template" type="text/x-handlebars-template">
    {{#each this}}
      {{#if active}}
        <div class="col-4 mb-5">
          <div class="card">
            <div class="img__wrapper">
              <img
              src={{image}}
              class="card-img-top" alt="{{picture}}">
            </div>
            
            <div class="card-body">
              <h5 class="card-title">{{name}}</h5>
              <p class="card-text">Количество: {{amount}} шт</p>
              <p class="card-text">Цена: {{price}} с</p>
              <button type="button" class="btn btn-success edit__btn" data-bs-toggle="modal" data-bs-target="#buffet-edit-modal" data-id="{{id}}">Редактировать</button>
              <button class="btn btn-danger delete__btn" data-id="{{id}}" data-amount="{{amount}}"
              data-price="{{price}}" data-name="{{name}}" data-image="{{image}}"
              >Удалить
            </button>
            </div>
          </div>
        </div>
      {{/if}}
    {{/each}}
  </script>

  <script id="buffet-deleted-product-template" type="text/x-handlebars-template">
    {{#each this}}
    {{#unless active}}
        <div class="col-12 mb-1">
          <div class="card">
            <div class="card-body">
              <h6 class="card-title">{{name}}</h6>
              <p class="card-text">Цена: {{price}} с</p>
              <button type="button" class="btn btn-success restore__btn" data-id="{{id}}" data-amount="{{amount}}"
              data-price="{{price}}" data-name="{{name}}" data-image="{{image}}"
              >Восстановить</button>

              <button type="button" class="btn btn-warning edit__btn" data-bs-toggle="modal" data-bs-target="#buffet-edit-modal" data-id="{{id}}">Редактировать и восстановить</button>
            </div>
          </div>
        </div>
        {{/unless}}
    {{/each}}
  </script>



  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous">
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.7.7/handlebars.min.js"
    integrity="sha512-RNLkV3d+aLtfcpEyFG8jRbnWHxUqVZozacROI4J2F1sTaDqo1dPQYs01OMi1t1w9Y2FdbSCDSQ2ZVdAC8bzgAg=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="js/buffet.js"></script>
</body>

</html>